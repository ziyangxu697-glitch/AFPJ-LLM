# AuditJudgLLM: A Domain-Specific Large Language Model and Benchmark for Evaluating Audit Judgment

## Project Introduction

This project focuses on data distillation and Large Language Model (LLM) fine-tuning in the audit domain. It generates high-quality reasoning data and performs fine-tuning using a Teacher-Student model framework, followed by systematic evaluation and testing of the model.

**Project Type:** Audit-specific data distillation and LLM fine-tuning.

**Main Features:**
- Dataset generation scripts.
- Answer extraction after the reasoning process.
- Multi-task evaluation scripts (Generative, Classification, Extraction).
- Data quality evaluation based on ROUGE-L.

---

## ğŸ“Š Project Architecture

Framework for Audit Finding Problem Judgment:
![Framework 1](images/framework_1.png)
<p align="center">Figure 1: Audit-Finding-Problem Judgment</p>

Dataset Construction Process:
![Framework 2](images/framework_2.png)
<p align="center">Figure 2: Dataset Preparation Process</p>

Reasoning Distillation Dataset Construction:
![Framework 3](images/framework_3.png)
<p align="center">Figure 3: Flowchart of the Reasoning Distillation Dataset Construction Process</p>

---

## ğŸš€ Quick Start

### 2.1 Obtaining Rationales

Use the following template as input to the Teacher Model to generate structured reasoning processes:

```python
prompt_template = (
    f"é’ˆå¯¹é—®é¢˜ï¼š'{question}'ï¼Œç”Ÿæˆå®Œæ•´ä¸”æ¸…æ™°çš„æ¨ç†è¿‡ç¨‹ï¼Œç¡®ä¿æœ€ç»ˆç­”æ¡ˆä¸'{my_answer}'ä¸¥æ ¼ä¸€è‡´ã€‚æ¨ç†è¿‡ç¨‹éœ€åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š\n"
    f"---\n"
    f"**1. é—®é¢˜åˆ†æï¼š**\n"
    f"- ç®€è¦åˆ†æé—®é¢˜çš„æ ¸å¿ƒå†…å®¹ï¼Œæ˜ç¡®éœ€è¦è§£å†³çš„å…³é”®ç‚¹ï¼ŒåŒ…æ‹¬ä»»åŠ¡è¦æ±‚çš„å„ä¸ªéƒ¨åˆ†ã€‚\n"
    f"\n"
    f"**2. æ¨ç†æ­¥éª¤ï¼š**\n"
    f"- **æ­¥éª¤ 1**ï¼šè¯†åˆ«é—®é¢˜çš„èƒŒæ™¯å’Œä»»åŠ¡è¦æ±‚ï¼Œæ˜ç¡®å®¡è®¡é—®é¢˜çš„è¡¨ç°å½¢å¼ã€‚\n"
    f"- **æ­¥éª¤ 2**ï¼šæ ¹æ®è¡¨ç°å½¢å¼ï¼Œåˆ†æå¯èƒ½é€‚ç”¨çš„æ³•å¾‹æ³•è§„ï¼Œèšç„¦å®šæ€§ä¾æ®ã€‚\n"
    f"- **æ­¥éª¤ 3**ï¼šåŸºäºå®šæ€§ç»“æœï¼Œç¡®å®šå¤„ç†å¤„ç½šä¾æ®ï¼ˆè‹¥é€‚ç”¨ï¼‰ã€‚\n"
    f"- **æ­¥éª¤ 4**ï¼šéªŒè¯æ¨ç†ç»“æœä¸é¢„æœŸç­”æ¡ˆ'{my_answer}'çš„ä¸€è‡´æ€§ï¼Œè°ƒæ•´æ ¼å¼æˆ–å†…å®¹ã€‚\n"
    f"\n"
    f"**3. æœ€ç»ˆç­”æ¡ˆï¼ˆä¸¥æ ¼è¦æ±‚ï¼‰ï¼š**\n"
    f"- å¿…é¡»ä¸¥æ ¼ç­‰äºé¢„æœŸç­”æ¡ˆï¼š'{my_answer}'ï¼ŒåŒ…æ‹¬æ ‡ç‚¹å’Œç”¨è¯ã€‚\n"
    f"- ç›´æ¥è¾“å‡ºç­”æ¡ˆï¼Œæ— é¢å¤–è§£é‡Šã€‚\n"
    f"---\n"
    f"âš ï¸ æ³¨æ„ï¼š\n"
    f"- å¿…é¡»å®Œæ•´å†™å‡ºé—®é¢˜åˆ†æå’Œè‡³å°‘ 4ä¸ªæ¨ç†æ­¥éª¤ï¼Œä¸èƒ½è·³è·ƒã€‚\n"
    f"- ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°æ ¼å¼ï¼Œç¡®ä¿é€»è¾‘è¯¦ç»†ä¸”è¿è´¯ã€‚\n"
)
```

Workflow:

1.The Teacher Model generates the reasoning process based on the question and the standard answer.

2.Extract the answer following the reasoning process.

3.Calculate the ROUGE-L score between the extracted answer and the Ground Truth.

4.Filter high-quality reasoning data based on the quality score.

Notes:

âš ï¸ The prompt templates for dataset construction vary for different task types.

---

### 2.2 JSON Files Generation

#### 2.2.1 Distillation Training Data

Taking a classification task as an example, the generated JSON data structure is as follows:

| Field                            | Content                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **input**                        | ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œä½ éœ€è¦åˆ¤æ–­ä¸‹åˆ—æ³•å¾‹æ¡æ¬¾å±äºå“ªä¸€ç±»ï¼Œå¹¶ä»ã€"ç½šåˆ™"ï¼Œ"æ³•å¾‹å½“ä¸­åº”å½“åšçš„è¡Œä¸º"ï¼Œ"æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º"ï¼Œ"è§„å®š"ã€‘é€‰æ‹©ä¸€ä¸ªç±»åˆ«ã€‚è¯¥é—®é¢˜çš„åˆ†ç±»é€»è¾‘å¦‚ä¸‹ï¼š<br><br>"ç½šåˆ™"ï¼šæŒ‡æ³•å¾‹ã€æ³•è§„æˆ–å…¶ä»–è§„èŒƒæ€§æ–‡ä»¶ä¸­è§„å®šçš„ï¼Œå¯¹è¿åç‰¹å®šæ³•å¾‹ä¹‰åŠ¡æˆ–ç¦æ­¢æ€§è§„å®šçš„è¡Œä¸ºæ‰€åº”æ‰¿æ‹…çš„æ³•å¾‹è´£ä»»å’Œå¤„ç½šæªæ–½ã€‚<br>"æ³•å¾‹å½“ä¸­åº”å½“åšçš„è¡Œä¸º"ï¼šæŒ‡æ³•å¾‹æ˜ç¡®è§„å®šè¦æ±‚å…¬æ°‘ã€æ³•äººæˆ–å…¶ä»–ç»„ç»‡å¿…é¡»å±¥è¡Œçš„è¡Œä¸ºæˆ–ä¹‰åŠ¡ã€‚<br>"æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º"ï¼šæŒ‡æ³•å¾‹æ˜ç¡®è§„å®šä¸å…è®¸å…¬æ°‘ã€æ³•äººæˆ–å…¶ä»–ç»„ç»‡ä»äº‹çš„è¡Œä¸ºã€‚<br>"è§„å®š"ï¼šæŒ‡çš„æ˜¯æ³•å¾‹ã€æ³•è§„ã€è§„ç« ä»¥åŠå…¶ä»–è§„èŒƒæ€§æ–‡ä»¶ä¸­å¯¹ç‰¹å®šäº‹é¡¹æ‰€ä½œå‡ºçš„å…·ä½“è¦æ±‚æˆ–æŒ‡ç¤ºã€‚è¿™äº›è§„å®šå¯ä»¥æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å¯¼æ€§çš„ï¼Œæ—¨åœ¨æ˜ç¡®å„æ–¹çš„æƒåˆ©ã€ä¹‰åŠ¡ä»¥åŠè¡Œä¸ºå‡†åˆ™ã€‚<br><br>æ³•å¾‹æ¡æ¬¾ï¼šç¦æ­¢åŒ»ç–—åºŸç‰©å¤„ç½®å•ä½å°†ä½¿ç”¨åçš„æ ¸é…¸æ£€æµ‹è¯•ç®¡ç›´æ¥æ··å…¥ç”Ÿæ´»åƒåœ¾å¤„ç†ç³»ç»Ÿã€‚<br><br>å›ç­”: |
| **content**                      | æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º                                                                                                                                                                                                                                                                                                                                                                                     |
| **reasoning_content**            | æ¨ç†è¿‡ç¨‹ï¼š<br>1. **è¯†åˆ«å…³é”®è¯**ï¼šæ¡æ¬¾ä¸­çš„æ ¸å¿ƒåŠ¨è¯ä¸º"ç¦æ­¢"ï¼Œæ˜ç¡®è¡¨ç¤ºä¸å…è®¸ç‰¹å®šè¡Œä¸ºã€‚<br>2. **æ¯”å¯¹åˆ†ç±»å®šä¹‰**ï¼š<br>   - "æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º"å¯¹åº”æ³•å¾‹ä¸­æ˜ä»¤ä¸å…è®¸å®æ–½çš„è¡Œä¸ºï¼Œ"ç¦æ­¢"ä¸€è¯ç›´æ¥ç¬¦åˆè¯¥ç±»åˆ«ç‰¹å¾ã€‚<br>   - å…¶ä»–ç±»åˆ«ï¼ˆå¦‚"ç½šåˆ™"æ¶‰åŠå¤„ç½šæªæ–½ï¼Œ"åº”å½“åš"å¼ºè°ƒä¹‰åŠ¡ï¼Œ"è§„å®š"ä¸ºä¸€èˆ¬æ€§è¦æ±‚ï¼‰å‡ä¸å¥‘åˆæ¡æ¬¾çš„ç›´æ¥è¡¨è¿°ã€‚<br>3. **ç»“è®º**ï¼šå› æ¡æ¬¾é€šè¿‡"ç¦æ­¢"æ˜ç¡®é™åˆ¶æŸè¡Œä¸ºï¼Œå±äºå¯¹è¡Œä¸ºçš„ç›´æ¥ç¦ä»¤ã€‚<br><br>ç­”æ¡ˆï¼šæ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º                                                                                                                                                |
| **repo_name**                    | Classification task                                                                                                                                                                                                                                                                                                                                                                          |
| **prompt_tokens_len**            | 200                                                                                                                                                                                                                                                                                                                                                                                          |
| **content_tokens_len**           | 4                                                                                                                                                                                                                                                                                                                                                                                            |
| **reasoning_content_tokens_len** | 135                                                                                                                                                                                                                                                                                                                                                                                          |

```json
{
  "input": "ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œä½ éœ€è¦åˆ¤æ–­ä¸‹åˆ—æ³•å¾‹æ¡æ¬¾å±äºå“ªä¸€ç±»...",
  "content": "æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º",
  "reasoning_content": "æ¨ç†è¿‡ç¨‹ï¼š\n1. **è¯†åˆ«å…³é”®è¯**ï¼šæ¡æ¬¾ä¸­çš„æ ¸å¿ƒåŠ¨è¯ä¸º"ç¦æ­¢"...",
  "repo_name": "Classification task",
  "prompt_tokens_len": 200,
  "content_tokens_len": 4,
  "reasoning_content_tokens_len": 135
}
```

---

#### 2.2.2 Non-Distillation Training Data

Standard instruction fine-tuning format:

| Field  | Content                                                                                                                                                                                                                                                                                                                                                                                      |
|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **instruction** | ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œä½ éœ€è¦åˆ¤æ–­ä¸‹åˆ—æ³•å¾‹æ¡æ¬¾å±äºå“ªä¸€ç±»ï¼Œå¹¶ä»ã€"ç½šåˆ™"ï¼Œ"æ³•å¾‹å½“ä¸­åº”å½“åšçš„è¡Œä¸º"ï¼Œ"æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º"ï¼Œ"è§„å®š"ã€‘é€‰æ‹©ä¸€ä¸ªç±»åˆ«ã€‚è¯¥é—®é¢˜çš„åˆ†ç±»é€»è¾‘å¦‚ä¸‹ï¼š<br><br>"ç½šåˆ™"ï¼šæŒ‡æ³•å¾‹ã€æ³•è§„æˆ–å…¶ä»–è§„èŒƒæ€§æ–‡ä»¶ä¸­è§„å®šçš„ï¼Œå¯¹è¿åç‰¹å®šæ³•å¾‹ä¹‰åŠ¡æˆ–ç¦æ­¢æ€§è§„å®šçš„è¡Œä¸ºæ‰€åº”æ‰¿æ‹…çš„æ³•å¾‹è´£ä»»å’Œå¤„ç½šæªæ–½ã€‚<br>"æ³•å¾‹å½“ä¸­åº”å½“åšçš„è¡Œä¸º"ï¼šæŒ‡æ³•å¾‹æ˜ç¡®è§„å®šè¦æ±‚å…¬æ°‘ã€æ³•äººæˆ–å…¶ä»–ç»„ç»‡å¿…é¡»å±¥è¡Œçš„è¡Œä¸ºæˆ–ä¹‰åŠ¡ã€‚<br>"æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º"ï¼šæŒ‡æ³•å¾‹æ˜ç¡®è§„å®šä¸å…è®¸å…¬æ°‘ã€æ³•äººæˆ–å…¶ä»–ç»„ç»‡ä»äº‹çš„è¡Œä¸ºã€‚<br>"è§„å®š"ï¼šæŒ‡çš„æ˜¯æ³•å¾‹ã€æ³•è§„ã€è§„ç« ä»¥åŠå…¶ä»–è§„èŒƒæ€§æ–‡ä»¶ä¸­å¯¹ç‰¹å®šäº‹é¡¹æ‰€ä½œå‡ºçš„å…·ä½“è¦æ±‚æˆ–æŒ‡ç¤ºã€‚è¿™äº›è§„å®šå¯ä»¥æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å¯¼æ€§çš„ï¼Œæ—¨åœ¨æ˜ç¡®å„æ–¹çš„æƒåˆ©ã€ä¹‰åŠ¡ä»¥åŠè¡Œä¸ºå‡†åˆ™ã€‚<br><br>æ³•å¾‹æ¡æ¬¾ï¼šç¦æ­¢åŒ»ç–—åºŸç‰©å¤„ç½®å•ä½å°†ä½¿ç”¨åçš„æ ¸é…¸æ£€æµ‹è¯•ç®¡ç›´æ¥æ··å…¥ç”Ÿæ´»åƒåœ¾å¤„ç†ç³»ç»Ÿã€‚<br><br>å›ç­”: |
| **input** | ""                                                                                                                                                                                                                                                                                                                                                                                           |
| **output** | æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º                                                                                                                                                                                                                                                                                                                                                                                     |
| **system** | ""                                                                                                                                                                                                                                                                                                                                                                                           |
| **history** | ""                                                                                                                                                                                                                                                                                                                                                                                           |

```json
{
  "instruction": "ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œä½ éœ€è¦åˆ¤æ–­ä¸‹åˆ—æ³•å¾‹æ¡æ¬¾å±äºå“ªä¸€ç±»...",
  "input": "",
  "output": "æ³•å¾‹ç¦æ­¢åšçš„è¡Œä¸º",
  "system": "",
  "history": ""
}
```

---

## ğŸ“¦ Requirements
```
torch==2.5.0+cu118
torchaudio==2.5.0+cu118
torchvision==0.20.0+cu118
transformers==4.52.4
```


